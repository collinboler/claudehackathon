<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Prep Pal - Settings</title>
  <link rel="stylesheet" href="settings.css">
</head>
<body>
  <div class="container">
    <h1>Prep Pal - Settings</h1>

    <section class="settings-section">
      <h2 class="collapsible-header">
        API Keys
        <span class="collapse-icon">^</span>
      </h2>
      <div class="collapsible-content">
      <div class="form-group">
        <label for="openaiKey">OpenAI API Key (for Whisper transcription)</label>
        <input type="password" id="openaiKey" placeholder="sk-...">
      </div>
      <div class="form-group">
        <label for="claudeKey">Claude API Key (for grading)</label>
        <input type="password" id="claudeKey" placeholder="sk-ant-...">
      </div>
      </div>
    </section>

    <section class="settings-section">
      <h2 class="collapsible-header">
        Resume
        <span class="collapse-icon">^</span>
      </h2>
      <div class="collapsible-content">
      <div class="form-group">
        <label for="resumeUpload">Upload Your Resume (Text or PDF)</label>
        <input type="file" id="resumeUpload" accept=".txt,.pdf">
        <div id="resumeStatus" class="status-text"></div>
      </div>
      <div class="form-group">
        <label for="resumeText">Resume Content</label>
        <textarea id="resumeText" rows="10" placeholder="Your resume will appear here..."></textarea>
      </div>
      </div>
    </section>

    <section class="settings-section">
      <h2 class="collapsible-header">
        Job Target
        <span class="collapse-icon">^</span>
      </h2>
      <div class="collapsible-content">
      <div class="form-group">
        <label for="jobRole">What job are you interviewing for?</label>
        <select id="jobRole">
          <option value="">Select a role...</option>
          <option value="Software Engineering">Software Engineering</option>
          <option value="Investment Banking">Investment Banking</option>
          <option value="Consulting">Consulting</option>
          <option value="Quantitative Finance">Quantitative Finance</option>
          <option value="Data Science">Data Science</option>
          <option value="Custom">Custom Role...</option>
        </select>
      </div>
      <div class="form-group" id="customRoleGroup" style="display: none;">
        <label for="customRole">Custom Role</label>
        <input type="text" id="customRole" placeholder="Enter your role...">
      </div>
      </div>
    </section>

    <section class="settings-section">
      <h2 class="collapsible-header">
        Grading Mode
        <span class="collapse-icon">^</span>
      </h2>
      <div class="collapsible-content">
      <div class="form-group">
        <label for="gradingMode">How should free browsing time be determined?</label>
        <select id="gradingMode">
          <option value="classic">Classic - Fixed cooldown period</option>
          <option value="earn-minutes">Earn Minutes - Based on performance</option>
        </select>
      </div>

      <div id="classicModeSettings" class="mode-settings">
        <div class="form-group">
          <label for="cooldownMinutes">Cooldown Period (minutes)</label>
          <input type="number" id="cooldownMinutes" min="1" max="120" value="30" placeholder="30">
          <p class="help-text">After completing an interview, you can browse freely for this many minutes.</p>
        </div>
      </div>

      <div id="earnMinutesSettings" class="mode-settings" style="display: none;">
        <p class="help-text">Earn browsing time based on your interview performance. Adjust the difficulty slider to scale all thresholds:</p>
        <div class="difficulty-control">
          <label class="difficulty-label">
            <span>Difficulty:</span>
            <span class="difficulty-value" id="difficultyLabel">Balanced</span>
          </label>
          <div class="difficulty-slider-container">
            <span class="difficulty-min">Easy</span>
            <input type="range" id="difficultySlider" min="1" max="5" step="1" value="3">
            <span class="difficulty-max">Hard</span>
          </div>
        </div>
        <div class="threshold-display">
          <div class="threshold-preview">
            <div class="preview-item">
              <span class="preview-label">Poor (0-39):</span>
              <span class="preview-value" id="poorMinutesValue">1</span> min
            </div>
            <div class="preview-item">
              <span class="preview-label">Fair (40-59):</span>
              <span class="preview-value" id="fairMinutesValue">2</span> min
            </div>
            <div class="preview-item">
              <span class="preview-label">Good (60-79):</span>
              <span class="preview-value" id="goodMinutesValue">4</span> min
            </div>
            <div class="preview-item">
              <span class="preview-label">Excellent (80-100):</span>
              <span class="preview-value" id="excellentMinutesValue">7</span> min
            </div>
          </div>
        </div>
        <!-- Hidden inputs to store calculated values -->
        <input type="hidden" id="poorMinutes" value="1">
        <input type="hidden" id="fairMinutes" value="2">
        <input type="hidden" id="goodMinutes" value="4">
        <input type="hidden" id="excellentMinutes" value="7">
      </div>
      </div>
    </section>

    <section class="settings-section">
      <h2 class="collapsible-header">
        Problem Sites
        <span class="collapse-icon">^</span>
      </h2>
      <div class="collapsible-content">
      <div class="form-group">
        <label>Sites that will trigger interview questions:</label>
        <div id="problemSites">
          <div class="site-item">
            <input type="checkbox" id="site-youtube" value="youtube.com" checked>
            <label for="site-youtube">youtube.com</label>
          </div>
          <div class="site-item">
            <input type="checkbox" id="site-instagram" value="instagram.com" checked>
            <label for="site-instagram">instagram.com</label>
          </div>
        </div>
        <div class="add-site-group">
          <input type="text" id="newSite" placeholder="Add new site (e.g., reddit.com)">
          <button id="addSiteBtn">Add Site</button>
        </div>
      </div>
      </div>
    </section>

    <div class="button-group">
      <button id="saveBtn" class="primary-btn">Save Settings</button>
      <button id="clearDataBtn" class="danger-btn">Clear All Data</button>
    </div>
  </div>

  <script src="settings.js"></script>
</body>
</html>
